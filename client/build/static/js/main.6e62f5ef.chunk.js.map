{"version":3,"sources":["routes/Home.js","routes/Room.js","App.js","serviceWorker.js","index.js"],"names":["Home","props","useState","login","avatar","name","gender","setLogin","roomName","setRoomName","rooms","setRooms","avatarList","setAvatarList","socketRef","useRef","setAvatar","d","useEffect","current","io","connect","emit","on","data","console","log","localStorage","getItem","location","search","JSON","parse","Avatars1","avatars","no","push","map","i","key","alt","className","src","onClick","Avatars2","Avatars3","value","onChange","e","target","type","placeholder","id","uuid","history","style","padding","room","index","flexWrap","code","roomID","max","joinRoom","width","marginRight","length","height","margin","setItem","stringify","messagesEnd","StyledVideo","styled","video","Video","ref","peer","stream","srcObject","playsInline","autoPlay","Room","useHistory","peers","setPeers","roomData","setRoomData","usersData","setUsersData","leaveUser","setLeaveUser","message","setMessage","messages","setMessages","userVideo","peersRef","match","params","showUsers","m","filter","u","includes","mute","scrollToBottom","listen","window","onbeforeunload","event","preventDefault","returnValue","undefined","roomMax","roomCode","navigator","mediaDevices","getUserMedia","audio","then","joinData","user","users","forEach","userID","userToSignal","callerID","Peer","initiator","trickle","signal","createPeer","peerID","payload","incomingSignal","addPeer","find","p","Emojis","emojis","stiker","text","sendMessage","scrollIntoView","behavior","muted","maxHeight","overflowY","fontSize","marginLeft","classChat","textAlign","borderBottom","float","border","borderRadius","clear","el","justifyContent","App","path","exact","component","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.6e62f5ef.chunk.js","sourcesContent":["\nimport React, {  useRef,useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport { v1 as uuid } from \"uuid\";\n\nconst Home = (props) => {\n    \n\n    let [login, setLogin] = useState({\n        login: false,\n        avatar: '',\n        name: '',\n        // major: '',\n        // year: '',\n        gender: ''\n    });\n    const [roomName, setRoomName] = useState('');\n    const [rooms, setRooms] = useState([]);\n    const [avatarList, setAvatarList] = useState('avatars');\n    const socketRef = useRef();\n\n  \n\n    useEffect(() => {\n\n\n\n\n        socketRef.current = io.connect('/');\n\n        socketRef.current.emit(\"find room\");\n\n        socketRef.current.on(\"all rooms\", data => {\n            console.log(data)\n            setRooms(data)\n        })\n        \n        if(localStorage.getItem(\"login\")){\n            if(props.location.search === '?login=true'){\n                setLogin({...JSON.parse(localStorage.getItem(\"login\")), login:true})\n            }else{\n                setLogin(JSON.parse(localStorage.getItem(\"login\")))\n            }\n        }\n\n        \n\n        \n    }, [props,setRooms]);\n\n\n    function findRoom(){\n        socketRef.current.emit(\"find room\");\n        \n    }\n    function create() {\n        if(roomName !== ''){\n            const id = uuid();\n            props.history.push(`/room/${id}/${roomName}/${socketRef.current.id}/100`);\n\n        }\n    }\n\n    function joinRoom(room) {\n        props.history.push(`/room/${room.roomID}/${room.name}/${room.code}/${room.max}`);\n    }\n\n\n    function updateLogin(){\n\n        // cek if null\n        if(login.avatar === '' || login.name === '' || login.gender === ''){\n        \n            // Isi dulu Boss\n\n        }else{\n            setLogin({ ...login, login:true }) \n            localStorage.setItem('login',JSON.stringify({\n                avatar: login.avatar,\n                name: login.name,\n                // major: login.major,\n                // year: login.year,\n                gender: login.gender\n            }))\n        }\n       \n\n    }\n\n    function showRoom(){\n        return rooms.map((room, index) => {\n            return  <div className=\"item\"\n            \n            style={{flexWrap:'wrap'}}\n            key={room.code} onClick={ () => joinRoom(room)}>\n                <img src={'/avatar/kawaii-animals/_'+(index+1)+'.svg'} alt=\"\" width=\"50px\" \n                style={{marginRight:'10px'}}\n                />\n                <h4>{ room.name } ({ room.length })</h4>\n            </div>\n        })\n    }\n\n    function setAvatar(d){\n\n        setLogin({...login,avatar: d})\n\n\n    }\n\n    const Avatars1 = () => {\n        let avatars = []\n\n        for(let no = 1; no <= 50;no++){\n            avatars.push(no)\n        }\n\n        return (<>\n                { avatars.map(i => {\n                    return <img  key={i} alt=\"avatar\" className=\"img\"  src={`/avatar/kawaii-avatars/_${i}.svg`} onClick={ () => { setAvatar(`/avatar/kawaii-avatars/_${i}.svg`)}}/>\n                }) }\n            </> )\n        \n    }\n\n    const Avatars2 = () => {\n        let avatars = []\n\n        for(let no = 1; no <= 50;no++){\n            avatars.push(no)\n        }\n\n        return (<>\n                { avatars.map(i => {\n                    return <img  key={i} alt=\"avatar\" className=\"img\"  src={`/avatar/kawaii-animals/_${i}.svg`} onClick={ () => { setAvatar(`/avatar/kawaii-animals/_${i}.svg`)}}/>\n                }) }\n            </> )\n        \n    }\n\n    const Avatars3 = () => {\n        let avatars = []\n\n        for(let no = 1; no <= 50;no++){\n            avatars.push(no)\n        }\n\n        return (<>\n                { avatars.map(i => {\n                    return <img  key={i} alt=\"avatar\" className=\"img\"  src={`/avatar/monster-emojis/_${i}.svg`} onClick={ () => { setAvatar(`/avatar/monster-emojis/_${i}.svg`)}}/>\n                }) }\n            </> )\n        \n    }\n\n    return (\n        <div className=\"main\">\n            { (login.login) ? \n                <>\n                    <div className=\"left\">\n                        <div className=\"content\">\n                            <h1>Maba. </h1>\n                            <input value={roomName} onChange={(e)=> setRoomName(e.target.value)} className=\"item\" type=\"text\" placeholder=\"Room Name\" />\n                            <div className=\"item active\" onClick={create}>Create Room</div>\n                            {/* <div className=\"item\">Unsil One Access</div> */}\n                            <div className=\"item\" onClick={ () => setLogin({ ...login, login: false }) }>Profile</div>\n                            <div className=\"item\">Donate</div>\n\n                        </div>\n                    </div>  \n                    <div className=\"right\">\n                        <div className=\"content\">\n                            <h2 style={{padding:'10px'}}>Room Recomendation : </h2>\n                            {\n                                showRoom()\n                            }\n                            <div className=\"item\"  onClick={findRoom}>Reload</div>\n\n                        </div>\n                    </div>\n                </>\n\n            : <div className=\"right\">\n                <form id=\"login-form\" className=\"content\">\n                \n                <input type=\"text\" className=\"item\" value={login.name} onChange={(e)=>{ setLogin({...login,name: e.target.value})}} placeholder=\"Name\" />\n                {/* <select className=\"item\" value={login.major} onChange={(e)=>{ setLogin({...login,major: e.target.value})}} >\n                    <option value=\"\">\n                            Select Major\n                    </option>\n                    <option value=\"Informatika\">\n                            Informatika\n                    </option>\n                    <option value=\"Bahasa Inggris\">\n                            Bahasa Inggris\n                    </option>\n                </select>\n                <select className=\"item\" value={login.year} onChange={(e)=>{ setLogin({...login,year: e.target.value})}} >\n                    <option value=\"\">\n                            Select Student Year\n                    </option>\n                    <option value=\"2018\">\n                            Student Year 2018\n                    </option>\n                    <option value=\"2021\">\n                            Student Year 2021\n                    </option>\n                </select> */}\n                    <div className=\"item twoitem\">\n                        <div className={(login.gender === 1) ? 'item_ active' : 'item_'} onClick={()=>{ setLogin({...login,gender: 1})}} >\n                            Male\n                        </div>\n                        <div className={(login.gender === 2) ? 'item_ active' : 'item_'} onClick={()=>{ setLogin({...login,gender: 2})}}>\n                            Female\n                        </div>\n                    </div>\n                        \n                <div className=\"item\">\n                    <img alt=\"\" style={{width:'150px',height:'150px',margin: 'auto'}} src={login.avatar} />\n                </div>\n               \n                { (avatarList === 'avatars') ? \n                    <div className=\"item\">\n                        <Avatars1 />\n                    </div>\n                : ''}\n                { (avatarList === 'animals') ? \n                    <div className=\"item\">\n                        <Avatars2 />\n                    </div>\n                : ''}\n\n                { (avatarList === 'monsters') ? \n                    <div className=\"item\">\n                        <Avatars3 />\n                    </div>\n                : ''}\n\n                <div className=\"item twoitem\">\n                    <div className={(avatarList === 'avatars') ? 'item_ active' : 'item_'} onClick={ () => setAvatarList('avatars')}>Avatar</div>\n                    <div className={(avatarList === 'animals') ? 'item_ active' : 'item_'} onClick={ () => setAvatarList('animals')}>Animals</div>\n                    <div className={(avatarList === 'monsters') ? 'item_ active' : 'item_'} onClick={ () => setAvatarList('monsters')}>Monsters</div>\n                </div>\n\n                <div className=\"item active\" onClick={updateLogin}>Login</div>\n                </form>\n            </div> \n            }\n            \n        </div>\n    );\n};\n\nexport default Home;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\nimport { useHistory } from 'react-router-dom'\n\n\n\n\nlet messagesEnd = '';\n\nconst StyledVideo = styled.video`\n        width:0;\n        height:0;\n        background:black\n`;\n\nconst Video = (props) => {\n    const ref = useRef();\n\n    useEffect(() => {\n            props.peer.on(\"stream\", stream => {\n                ref.current.srcObject = stream;\n            })\n\n    }, [props]);\n\n        return (\n            <div>\n                <StyledVideo playsInline autoPlay ref={ref} />\n            </div>\n        );\n}\n\nconst Room = (props) => {\n    // const [joined, setJoined] = useState(false);\n\n\n    const history = useHistory()\n\n\n    const [peers, setPeers] = useState([]);\n    const [roomData, setRoomData] = useState([]);\n    const [usersData, setUsersData] = useState([]);\n    const [leaveUser, setLeaveUser] = useState([]);\n    // const [mute, setMute] = useState(false);\n    const [message, setMessage] = useState('');\n    const [messages, setMessages] = useState([]);\n\n    const socketRef = useRef();\n    const userVideo = useRef();\n    const peersRef = useRef([]);\n    const roomID = props.match.params.roomID;\n\n\n    useEffect(() => {    \n\n        scrollToBottom();\n\n    \n        history.listen( () => {\n            socketRef.current.emit(\"leave\");\n        })\n\n        window.onbeforeunload = (event) => {\n            const e = event || window.event;\n            // Cancel the event\n            e.preventDefault();\n\n            socketRef.current.emit(\"leave\");\n\n            if (e) {\n                e.returnValue = ''; // Legacy method for cross browser support\n            }\n            return ''; // Legacy method for cross browser support\n\n        };\n            \n    \n        const login = JSON.parse(localStorage.getItem('login'))\n\n       \n        if(login === null || login === undefined){\n                props.history.push(`/`);\n        }else{\n            \n\n\n            const roomMax = props.match.params.max;\n            const roomName = props.match.params.name;\n            const roomCode = props.match.params.code;\n            \n            socketRef.current = io.connect('/');\n\n            \n            navigator.mediaDevices.getUserMedia({ video: false, audio: true }).then(stream => {\n\n                \n                userVideo.current.srcObject = stream;\n\n\n                let joinData = {\n                    max: roomMax,\n                    name: roomName,\n                    code: roomCode,\n                    roomID: roomID,\n                    user: {...login, id: socketRef.current.id, mute: true }\n                }\n                \n                socketRef.current.emit(\"join room\", joinData);\n\n                socketRef.current.on(\"room data\", data => {\n                    setRoomData(data.roomData[0])\n                    setUsersData(data.usersData)\n                })\n\n                socketRef.current.on(\"messages\", data => {\n                    setMessages(data)\n                    scrollToBottom()\n                })\n\n                socketRef.current.on(\"user leave\", data => {\n                    leaveUser.push(data)\n                    setLeaveUser(leaveUser)\n                })\n\n                socketRef.current.on(\"all users\", users => {\n                \n                    const peers = [];\n                    users.forEach(userID => {\n                        const peer = createPeer(userID, socketRef.current.id, stream);\n                        peersRef.current.push({\n                            peerID: userID,\n                            peer,\n                        })\n                        \n                        peers.push(peer);\n\n\n                    })\n\n                    setPeers(peers);\n\n\n                })\n\n                socketRef.current.on(\"user joined\", payload => {\n                    \n                    const peer = addPeer(payload.signal, payload.callerID, stream);\n\n                    peersRef.current.push({\n                        peerID: payload.callerID,\n                        peer,\n                    })\n\n                    setPeers(users => [...users, peer]);\n                });\n\n                socketRef.current.on(\"receiving returned signal\", payload => {\n                    const item = peersRef.current.find(p => p.peerID === payload.id);\n                    item.peer.signal(payload.signal);\n                });\n\n            })\n\n\n        \n        }\n        \n    }, [roomID,props,leaveUser,history]);\n\n    function createPeer(userToSignal, callerID, stream) {\n        const peer = new Peer({\n            initiator: true,\n            trickle: false,\n            stream,\n        });\n\n        peer.on(\"signal\", signal => {\n            socketRef.current.emit(\"sending signal\", { userToSignal, callerID, signal })\n        })\n\n        return peer;\n    }\n\n    function addPeer(incomingSignal, callerID, stream) {\n        const peer = new Peer({\n            initiator: false,\n            trickle: false,\n            stream,\n        })\n\n        peer.on(\"signal\", signal => {\n            socketRef.current.emit(\"returning signal\", { signal, callerID })\n        })\n\n        peer.signal(incomingSignal);\n\n        return peer;\n    }\n\n    function showUsers(m){\n\n            let data = usersData.filter(u => {\n                let id = leaveUser.includes(u.id)\n                if(id){\n                    return u.id !== id;\n                }else{\n                    if(m === 1){\n                        return u.mute !== true;\n                    }else{\n                        return u.mute !== false;\n                    }\n                }\n                 \n            })\n            // console.log(data)\n            // console.log(leaveUser)\n            return data.map((d,index) => {\n                return (\n                    <div key={index} className=\"item-user\" >\n                        <img src={d.avatar} alt=\"avatar\" />\n                        <span className=\"name\"> { d.name } </span>\n                    </div>\n                )\n            })\n        \n    }\n\n\n    const Emojis = () => {\n        let emojis = []\n\n        for(let no = 1; no <= 50;no++){\n            emojis.push(no)\n        }\n\n        return (<>\n                { emojis.map(i => {\n                    return <img style={{margin:'5px'}}  key={i} alt=\"r\" className=\"img\"  src={`/emoji/icon/_${i}.svg`} onClick={() => sendStiker(`/emoji/icon/_${i}.svg`)} />\n                }) }\n            </> )\n        \n    }\n\n    function sendMessage(m){\n        socketRef.current.emit(\"send message\", { text:m, stiker: \"\"});\n        setMessage(\"\")\n    }\n    function sendStiker(stiker){\n        socketRef.current.emit(\"send message\", { text:\"\", stiker: stiker });\n    }\n\n    function leaveRoom(){\n        socketRef.current.emit(\"leave\");\n        props.history.push('/?login=true')\n    }\n\n\n    function scrollToBottom () {\n        // console.log(messagesEnd)\n        messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n    }\n\n    function showMessages(){\n        return (<>\n            {\n                messages.map((m,index) => {\n\n                    let classChat = {width:'100%',fontSize:'1rem',textAlign: 'right',padding:'10px',borderBottom:'1px solid var(--primary)'};\n\n                    if(m.id === socketRef.current.id){\n                        classChat = {width:'100%',float:'left',fontSize:'1rem',padding:'10px',borderBottom:'1px solid var(--primary)'};\n                    }\n\n                    return <>\n                    { (m.stiker === '') ?\n                        <div key={index} style={classChat}>\n                                <span>{m.name}</span> \n                                <img src={m.avatar} style={{width:'20px',height:'20px',border:'2px solid var(--primary)',borderRadius:'100px'}} alt=\"\" />\n                                <span style={{fontSize:'1.2rem'}}> { m.text }</span> \n            \n                        </div> : ''} \n                    { (m.text === '') ?\n                        <div style={classChat}>\n                                <span>{m.name}</span> \n                                <img src={m.avatar} style={{width:'20px',height:'20px',border:'2px solid var(--primary)',borderRadius:'100px'}} alt=\"\" />\n                                \n                                <img src={m.stiker} style={{width:'100px',height:'100px'}} alt=\"\" />\n                        </div>\n                    : ''}\n\n                    \n\n                    </>\n                    \n                })\n\n                \n                \n            }\n            {scrollToBottom}\n        </>)\n        \n    }\n\n    return (\n\n        \n        <div className=\"main\">\n\n\n               <StyledVideo muted ref={userVideo} autoPlay playsInline />\n                {peers.map((peer, index) => {\n                    return (\n                        <Video key={index} peer={peer} />\n                    );\n                })}\n\n           \n           <div className=\"left\">\n                <div className=\"content\"\n                style={{\n                    maxHeight:'80vh',\n                    overflowY:'scroll'\n                }}>\n                <h1 >\n                    Maba. \n                    <button className=\"item\" style={{width:'100px',fontSize:'1rem',marginLeft:'auto',padding:'10px'}} onClick={leaveRoom}>Leave</button>\n                </h1>\n                <br />\n                {/* <h6 style={{width:'100%',padding:'30px'}}>Speakers :</h6> */}\n                {showUsers(1)}\n                {/* <h6 style={{width:'100%',padding:'30px'}}>Listeners :</h6> */}\n                {showUsers(2)}\n                </div>\n           </div>\n           <div className=\"right\">\n\n               <div className=\"content\">\n\n                <div className=\"item\" style={{\n                    height:'40vh',\n                }}>\n                    <div style={\n                        {\n                            width:'100%',\n                            height: '100%',\n                            overflowY:'scroll'\n                        }\n                    }>\n\n                \n                <div className=\"item\" onClick={() => sendMessage(\"Hai ..\")}>\n                    Join Chat ( { roomData.length } User)\n                </div>\n\n                {\n                    showMessages()\n                }\n               \n                \n\n                <div  style={{ float:\"left\", clear: \"both\" }}\n                    ref={(el) => { messagesEnd = el; }}>\n                </div>\n\n                </div>\n\n\n                </div>\n                <div className=\"item\" style={{justifyContent:'left'}}>\n                    <Emojis />\n                </div>\n                <div className=\"item\" >\n                    <input type=\"text\" value={message} onChange={(e) => setMessage(e.target.value)} className=\"item\" />\n                    <button onClick={()=>sendMessage(message)} className=\"item\" style={{width:'100px',fontSize: '1rem',textAlign:'center'}}>\n                        Send\n                    </button>\n                </div>\n\n\n               </div>\n\n               {/* <div className=\"content\">\n                    <div className=\"item\">\n                        Room Name : { roomData.name }\n                    </div>\n                    <div className=\"item\">\n                        Room Code :{ roomData.code }\n                    </div>\n                    <div className=\"item\">\n                        Users : { roomData.length } joined\n                    </div>\n                    <div className=\"item twogender\">\n                        <div className={(mute) ? 'gender active': 'gender'} onClick={()=> {setMute(!mute)}} >\n                            Mute\n                        </div>\n                        <div className=\"gender\" >\n                            leave\n                        </div>\n                    </div>\n               </div> */}\n           </div>\n        </div>\n    );\n};\n\nexport default Room;\n","import React from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport Home from \"./routes/Home\";\nimport Room from \"./routes/Room\";\n\n\nfunction App() {\n  \n  return (\n    <BrowserRouter >\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/room/:roomID/:name/:code/:max\" component={Room} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\nserviceWorker.register();"],"sourceRoot":""}