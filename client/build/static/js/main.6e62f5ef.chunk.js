(this.webpackJsonpmaba=this.webpackJsonpmaba||[]).push([[0],{121:function(e,t){},123:function(e,t){},134:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(63),o=a.n(i),l=(a(75),a(34)),s=a(1),m=a(3),u=a(6),v=a(26),d=a.n(v),f=a(136),g=function(e){var t=Object(r.useState)({login:!1,avatar:"",name:"",gender:""}),a=Object(u.a)(t,2),n=a[0],i=a[1],o=Object(r.useState)(""),l=Object(u.a)(o,2),s=l[0],v=l[1],g=Object(r.useState)([]),p=Object(u.a)(g,2),h=p[0],E=p[1],b=Object(r.useState)("avatars"),j=Object(u.a)(b,2),O=j[0],w=j[1],N=Object(r.useRef)();function y(e){i(Object(m.a)(Object(m.a)({},n),{},{avatar:e}))}Object(r.useEffect)((function(){N.current=d.a.connect("/"),N.current.emit("find room"),N.current.on("all rooms",(function(e){console.log(e),E(e)})),localStorage.getItem("login")&&("?login=true"===e.location.search?i(Object(m.a)(Object(m.a)({},JSON.parse(localStorage.getItem("login"))),{},{login:!0})):i(JSON.parse(localStorage.getItem("login"))))}),[e,E]);var k=function(){for(var e=[],t=1;t<=50;t++)e.push(t);return c.a.createElement(c.a.Fragment,null,e.map((function(e){return c.a.createElement("img",{key:e,alt:"avatar",className:"img",src:"/avatar/kawaii-avatars/_".concat(e,".svg"),onClick:function(){y("/avatar/kawaii-avatars/_".concat(e,".svg"))}})})))},x=function(){for(var e=[],t=1;t<=50;t++)e.push(t);return c.a.createElement(c.a.Fragment,null,e.map((function(e){return c.a.createElement("img",{key:e,alt:"avatar",className:"img",src:"/avatar/kawaii-animals/_".concat(e,".svg"),onClick:function(){y("/avatar/kawaii-animals/_".concat(e,".svg"))}})})))},S=function(){for(var e=[],t=1;t<=50;t++)e.push(t);return c.a.createElement(c.a.Fragment,null,e.map((function(e){return c.a.createElement("img",{key:e,alt:"avatar",className:"img",src:"/avatar/monster-emojis/_".concat(e,".svg"),onClick:function(){y("/avatar/monster-emojis/_".concat(e,".svg"))}})})))};return c.a.createElement("div",{className:"main"},n.login?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"content"},c.a.createElement("h1",null,"Maba. "),c.a.createElement("input",{value:s,onChange:function(e){return v(e.target.value)},className:"item",type:"text",placeholder:"Room Name"}),c.a.createElement("div",{className:"item active",onClick:function(){if(""!==s){var t=Object(f.a)();e.history.push("/room/".concat(t,"/").concat(s,"/").concat(N.current.id,"/100"))}}},"Create Room"),c.a.createElement("div",{className:"item",onClick:function(){return i(Object(m.a)(Object(m.a)({},n),{},{login:!1}))}},"Profile"),c.a.createElement("div",{className:"item"},"Donate"))),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"content"},c.a.createElement("h2",{style:{padding:"10px"}},"Room Recomendation : "),h.map((function(t,a){return c.a.createElement("div",{className:"item",style:{flexWrap:"wrap"},key:t.code,onClick:function(){return function(t){e.history.push("/room/".concat(t.roomID,"/").concat(t.name,"/").concat(t.code,"/").concat(t.max))}(t)}},c.a.createElement("img",{src:"/avatar/kawaii-animals/_"+(a+1)+".svg",alt:"",width:"50px",style:{marginRight:"10px"}}),c.a.createElement("h4",null,t.name," (",t.length,")"))})),c.a.createElement("div",{className:"item",onClick:function(){N.current.emit("find room")}},"Reload")))):c.a.createElement("div",{className:"right"},c.a.createElement("form",{id:"login-form",className:"content"},c.a.createElement("input",{type:"text",className:"item",value:n.name,onChange:function(e){i(Object(m.a)(Object(m.a)({},n),{},{name:e.target.value}))},placeholder:"Name"}),c.a.createElement("div",{className:"item twoitem"},c.a.createElement("div",{className:1===n.gender?"item_ active":"item_",onClick:function(){i(Object(m.a)(Object(m.a)({},n),{},{gender:1}))}},"Male"),c.a.createElement("div",{className:2===n.gender?"item_ active":"item_",onClick:function(){i(Object(m.a)(Object(m.a)({},n),{},{gender:2}))}},"Female")),c.a.createElement("div",{className:"item"},c.a.createElement("img",{alt:"",style:{width:"150px",height:"150px",margin:"auto"},src:n.avatar})),"avatars"===O?c.a.createElement("div",{className:"item"},c.a.createElement(k,null)):"","animals"===O?c.a.createElement("div",{className:"item"},c.a.createElement(x,null)):"","monsters"===O?c.a.createElement("div",{className:"item"},c.a.createElement(S,null)):"",c.a.createElement("div",{className:"item twoitem"},c.a.createElement("div",{className:"avatars"===O?"item_ active":"item_",onClick:function(){return w("avatars")}},"Avatar"),c.a.createElement("div",{className:"animals"===O?"item_ active":"item_",onClick:function(){return w("animals")}},"Animals"),c.a.createElement("div",{className:"monsters"===O?"item_ active":"item_",onClick:function(){return w("monsters")}},"Monsters")),c.a.createElement("div",{className:"item active",onClick:function(){""===n.avatar||""===n.name||""===n.gender||(i(Object(m.a)(Object(m.a)({},n),{},{login:!0})),localStorage.setItem("login",JSON.stringify({avatar:n.avatar,name:n.name,gender:n.gender})))}},"Login"))))},p=a(69),h=a(64),E=a(35),b=a.n(E),j=a(65),O="",w=j.a.video(n||(n=Object(h.a)(["\n        width:0;\n        height:0;\n        background:black\n"]))),N=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){e.peer.on("stream",(function(e){t.current.srcObject=e}))}),[e]),c.a.createElement("div",null,c.a.createElement(w,{playsInline:!0,autoPlay:!0,ref:t}))},y=function(e){var t=Object(s.f)(),a=Object(r.useState)([]),n=Object(u.a)(a,2),i=n[0],o=n[1],l=Object(r.useState)([]),v=Object(u.a)(l,2),f=v[0],g=v[1],h=Object(r.useState)([]),E=Object(u.a)(h,2),j=E[0],y=E[1],k=Object(r.useState)([]),x=Object(u.a)(k,2),S=x[0],C=x[1],I=Object(r.useState)(""),_=Object(u.a)(I,2),D=_[0],R=_[1],A=Object(r.useState)([]),W=Object(u.a)(A,2),F=W[0],J=W[1],M=Object(r.useRef)(),z=Object(r.useRef)(),L=Object(r.useRef)([]),P=e.match.params.roomID;function U(e){return j.filter((function(t){var a=S.includes(t.id);return a?t.id!==a:1===e?!0!==t.mute:!1!==t.mute})).map((function(e,t){return c.a.createElement("div",{key:t,className:"item-user"},c.a.createElement("img",{src:e.avatar,alt:"avatar"}),c.a.createElement("span",{className:"name"}," ",e.name," "))}))}Object(r.useEffect)((function(){H(),t.listen((function(){M.current.emit("leave")})),window.onbeforeunload=function(e){var t=e||window.event;return t.preventDefault(),M.current.emit("leave"),t&&(t.returnValue=""),""};var a=JSON.parse(localStorage.getItem("login"));if(null===a||void 0===a)e.history.push("/");else{var n=e.match.params.max,r=e.match.params.name,c=e.match.params.code;M.current=d.a.connect("/"),navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then((function(e){z.current.srcObject=e;var t={max:n,name:r,code:c,roomID:P,user:Object(m.a)(Object(m.a)({},a),{},{id:M.current.id,mute:!0})};M.current.emit("join room",t),M.current.on("room data",(function(e){g(e.roomData[0]),y(e.usersData)})),M.current.on("messages",(function(e){J(e),H()})),M.current.on("user leave",(function(e){S.push(e),C(S)})),M.current.on("all users",(function(t){var a=[];t.forEach((function(t){var n=function(e,t,a){var n=new b.a({initiator:!0,trickle:!1,stream:a});return n.on("signal",(function(a){M.current.emit("sending signal",{userToSignal:e,callerID:t,signal:a})})),n}(t,M.current.id,e);L.current.push({peerID:t,peer:n}),a.push(n)})),o(a)})),M.current.on("user joined",(function(t){var a=function(e,t,a){var n=new b.a({initiator:!1,trickle:!1,stream:a});return n.on("signal",(function(e){M.current.emit("returning signal",{signal:e,callerID:t})})),n.signal(e),n}(t.signal,t.callerID,e);L.current.push({peerID:t.callerID,peer:a}),o((function(e){return[].concat(Object(p.a)(e),[a])}))})),M.current.on("receiving returned signal",(function(e){L.current.find((function(t){return t.peerID===e.id})).peer.signal(e.signal)}))}))}}),[P,e,S,t]);var B=function(){for(var e=[],t=1;t<=50;t++)e.push(t);return c.a.createElement(c.a.Fragment,null,e.map((function(e){return c.a.createElement("img",{style:{margin:"5px"},key:e,alt:"r",className:"img",src:"/emoji/icon/_".concat(e,".svg"),onClick:function(){return t="/emoji/icon/_".concat(e,".svg"),void M.current.emit("send message",{text:"",stiker:t});var t}})})))};function T(e){M.current.emit("send message",{text:e,stiker:""}),R("")}function H(){O.scrollIntoView({behavior:"smooth"})}return c.a.createElement("div",{className:"main"},c.a.createElement(w,{muted:!0,ref:z,autoPlay:!0,playsInline:!0}),i.map((function(e,t){return c.a.createElement(N,{key:t,peer:e})})),c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"content",style:{maxHeight:"80vh",overflowY:"scroll"}},c.a.createElement("h1",null,"Maba.",c.a.createElement("button",{className:"item",style:{width:"100px",fontSize:"1rem",marginLeft:"auto",padding:"10px"},onClick:function(){M.current.emit("leave"),e.history.push("/?login=true")}},"Leave")),c.a.createElement("br",null),U(1),U(2))),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"item",style:{height:"40vh"}},c.a.createElement("div",{style:{width:"100%",height:"100%",overflowY:"scroll"}},c.a.createElement("div",{className:"item",onClick:function(){return T("Hai ..")}},"Join Chat ( ",f.length," User)"),c.a.createElement(c.a.Fragment,null,F.map((function(e,t){var a={width:"100%",fontSize:"1rem",textAlign:"right",padding:"10px",borderBottom:"1px solid var(--primary)"};return e.id===M.current.id&&(a={width:"100%",float:"left",fontSize:"1rem",padding:"10px",borderBottom:"1px solid var(--primary)"}),c.a.createElement(c.a.Fragment,null,""===e.stiker?c.a.createElement("div",{key:t,style:a},c.a.createElement("span",null,e.name),c.a.createElement("img",{src:e.avatar,style:{width:"20px",height:"20px",border:"2px solid var(--primary)",borderRadius:"100px"},alt:""}),c.a.createElement("span",{style:{fontSize:"1.2rem"}}," ",e.text)):"",""===e.text?c.a.createElement("div",{style:a},c.a.createElement("span",null,e.name),c.a.createElement("img",{src:e.avatar,style:{width:"20px",height:"20px",border:"2px solid var(--primary)",borderRadius:"100px"},alt:""}),c.a.createElement("img",{src:e.stiker,style:{width:"100px",height:"100px"},alt:""})):"")})),H),c.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(e){O=e}}))),c.a.createElement("div",{className:"item",style:{justifyContent:"left"}},c.a.createElement(B,null)),c.a.createElement("div",{className:"item"},c.a.createElement("input",{type:"text",value:D,onChange:function(e){return R(e.target.value)},className:"item"}),c.a.createElement("button",{onClick:function(){return T(D)},className:"item",style:{width:"100px",fontSize:"1rem",textAlign:"center"}},"Send")))))};var k=function(){return c.a.createElement(l.a,null,c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/",exact:!0,component:g}),c.a.createElement(s.a,{path:"/room/:roomID/:name/:code/:max",component:y})))},x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function S(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");x?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):S(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):S(t,e)}))}}()},70:function(e,t,a){e.exports=a(134)},75:function(e,t,a){},98:function(e,t){}},[[70,1,2]]]);
//# sourceMappingURL=main.6e62f5ef.chunk.js.map